#Использовать autumn
#Использовать ".."
#Использовать "."
#Использовать 1testrunner
#Использовать asserts

&Тест
Процедура ВалидацияОграничениеВалидноРаботает() Экспорт

	// Дано
	Поделка = Новый Поделка();
	Поделка.ЗапуститьПриложение();

	Валидатор = Поделка.НайтиЖелудь("Валидатор");

	ВложенныйОбъект = Новый ТестовыйОбъект;

	ТестовыйОбъект = Новый ТестовыйОбъект;
	ТестовыйОбъект.Поле1 = "Значение1";
	ТестовыйОбъект.ВложенныйОбъект = ВложенныйОбъект;

	// Когда
	РезультатВалидации = Валидатор.Валидировать(ТестовыйОбъект);

	// Тогда
	Ожидаем.Что(РезультатВалидации).ИмеетДлину(2);

	Нарушение = РезультатВалидации[0];
	Ожидаем.Что(Нарушение.Объект()).Равно(ТестовыйОбъект);
	Ожидаем.Что(Нарушение.ИмяСвойства()).Равно("Поле2");
	Ожидаем.Что(Нарушение.ТипСвойства()).Равно("Поле");
	Ожидаем.Что(Нарушение.Сообщение()).Равно("Значение не заполнено");
	Ожидаем.Что(Нарушение.Код()).Равно("filled");

	Нарушение = РезультатВалидации[1];
	Ожидаем.Что(Нарушение.Объект()).Равно(ТестовыйОбъект);
	Ожидаем.Что(Нарушение.ИмяСвойства()).Равно("ВложенныйОбъект");
	Ожидаем.Что(Нарушение.ТипСвойства()).Равно("Поле");
	Ожидаем.Что(Нарушение.Сообщение()).Равно("Значение не валидно");
	Ожидаем.Что(Нарушение.Код()).Равно("valid");

КонецПроцедуры

// ВалидацияОграничениеЗаполненоРаботает();
